<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Installing BetterBootLoader on a SKR board - </title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Installing BetterBootLoader on a SKR board | Gadget Angel Voron Documentation</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Installing BetterBootLoader on a SKR board" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Voron Official and Community Documentation" /> <meta property="og:description" content="Voron Official and Community Documentation" /> <link rel="canonical" href="http://localhost:4000/community/howto/kage-chan/installing_better_bootloader.html" /> <meta property="og:url" content="http://localhost:4000/community/howto/kage-chan/installing_better_bootloader.html" /> <meta property="og:site_name" content="Gadget Angel Voron Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Installing BetterBootLoader on a SKR board" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Voron Official and Community Documentation","headline":"Installing BetterBootLoader on a SKR board","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/voron_design_logo.png"}},"url":"http://localhost:4000/community/howto/kage-chan/installing_better_bootloader.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Voron Documentation</a></li><li class="nav-list-item"><a href="http://localhost:4000/about.html" class="nav-list-link">About Voron</a></li><li class="nav-list-item"><a href="http://localhost:4000/hardware.html" class="nav-list-link">Choosing a Printer / Extruder</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/sourcing.html" class="nav-list-link">Sourcing Information</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/materials.html" class="nav-list-link">Materials Selection</a></li><li class="nav-list-item "><a href="http://localhost:4000/sourcing_faq.html" class="nav-list-link">Sourcing / Buying FAQ</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/build/" class="nav-list-link">The Build</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/build/mechanical/" class="nav-list-link">Mechanical Assembly</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/build/electrical/" class="nav-list-link">Electrical Wiring</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/build/software/" class="nav-list-link">Software Installation</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/build/software/installing_mainsail.html" class="nav-list-link">Installing Mainsail</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/build/software/installing_fluidd.html" class="nav-list-link">Installing Fluidd</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/build/software/installing_octoprint.html" class="nav-list-link">Installing Octoprint</a> </li></ul></li><li class="nav-list-item "><a href="http://localhost:4000/build/software/configuration.html" class="nav-list-link">Software Configuration</a></li><li class="nav-list-item "><a href="http://localhost:4000/build/startup/" class="nav-list-link">Initial Startup</a></li><li class="nav-list-item "><a href="http://localhost:4000/build/slicer/" class="nav-list-link">Slicer Setup</a></li><li class="nav-list-item "><a href="http://localhost:4000/build/slicer/first_print.html" class="nav-list-link">First Print</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/tuning/" class="nav-list-link">Tuning Guides</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/tuning/secondary_printer_tuning.html" class="nav-list-link">Secondary Printer Tuning</a></li><li class="nav-list-item "><a href="http://localhost:4000/tuning/filament_tuning.html" class="nav-list-link">Filament Tuning</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/maintenance.html" class="nav-list-link">Maintenance Guide</a></li><li class="nav-list-item"><a href="http://localhost:4000/history.html" class="nav-list-link">Voron History</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/community/" class="nav-list-link">Community Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/community/howto/" class="nav-list-link">How-To's</a></li><li class="nav-list-item "><a href="http://localhost:4000/community/troubleshooting/" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item "><a href="http://localhost:4000/community/electronics/" class="nav-list-link">Alternate Electronics</a></li><li class="nav-list-item "><a href="http://localhost:4000/community/macros/" class="nav-list-link">Custom Macros</a></li><li class="nav-list-item "><a href="http://localhost:4000/community/video_guides.html" class="nav-list-link">Video Guides</a></li><li class="nav-list-item "><a href="http://localhost:4000/community/resources.html" class="nav-list-link">Other Resources</a></li><li class="nav-list-item "><a href="http://localhost:4000/community/support/submission_information.html" class="nav-list-link">Community Submission Information</a></li><li class="nav-list-item "><a href="http://localhost:4000/community/support/pull_request_guide.html" class="nav-list-link">Pull Request Guide</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/GadgetAngel/GA-Voron-Documentation" class="site-button" > Voron Documentation on GitHub </a> </li> <li class="aux-nav-list-item"> <a href="https://gadgetangel.org" class="site-button" > VoronDesign Home </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="installing-betterbootloader-on-a-skr-board"> <a href="#installing-betterbootloader-on-a-skr-board" class="anchor-heading" aria-labelledby="installing-betterbootloader-on-a-skr-board"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing BetterBootLoader on a SKR board </h1> <p>First and foremost, I would like to thank Arksine for this great tool. When I installed BetterBootLoader I thought it was a lot more complicated, partly because I was unable to find any detailed installation instructions, especially on how to flash Klipper through USB. So I have decided to write this very short step-by-step installation instructions, in the hope it might help somebody installing this excellent tool in the future.</p> <p><strong>A word of warning:</strong> This potentially can brick (soft-brick) your SKRs if something goes wrong. If you have the propper programming tool, you might be able to reflash the original firmware back to the SKRs, but most people won’t have these. Be careful!</p> <p>BetterBootLoader is a replacement to the stock firmware of the SKR or, for that matter, any LPC17xx-Board. The most important difference to the original firmware is that it allows installing Klipper on the SKR from the Pi through the USB connection without physical access to the SKR’s SD card.</p> <h2 id="prerequisites"> <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h2> <p>This guide is written with a VoronDesign v2 printer in mind, which usually has two SKRs as controllers, but it will also work for other printers with the same control board. The described firmware will only install on compatible controllers that use a LPC17xx MCU. This includes the SKR 1.3 or 1.4 used in the Voron v1 and v2. Do not attempt this on your SKR E3 mini in case you have a Voron v0 or switchwire! In addition, a Klipper environment that is set up and configured to operate properly is assumed. After going through this guide you will be able to flash new Klipper versions to your SKRs without accessing the SD cards.</p> <p>Things you need to prepare:</p> <ul> <li>Turn off your printer</li> <li>Get access to the SD cards of your SKRs (for the last time, hopefully!)</li> </ul> <h2 id="installing"> <a href="#installing" class="anchor-heading" aria-labelledby="installing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing </h2> <p>It does not matter if you do both SKRs at the same time or if you do them one at a time.</p> <ol> <li> <p>Download betterbootloader.bin (only this one file) from the <a href="https://github.com/Arksine/LPC17xx-DFU-Bootloader/releases">latest release</a>. Copy the just downloaded betterbootloader.bin to the root directory of your SKRs’ SD cards and rename them to “firmware.bin”. Leave the “firmware.cur” file in there if it exists.</p> </li> <li> <p>Put the SD cards back into your SKRs and power your printer. Leave it powered for about 10 seconds. Then cut the power again. Do not cut it earlier, you might risk soft-bricking your SKR. You can now flip your printer back into a upright position. After all LEDs have turned off, power your printer back up.</p> </li> <li> <p>Connect to the Raspberry Pi in your printer through SSH.</p> </li> <li> <p>Go to your Klipper directory and update it</p> </li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/klipper
git pull
</code></pre></div></div> <ol> <li>Most people will not have USB communication enabled for their SKRs, which must be done at this point, otherwise Klipper will not be able to communicate with the SKRs after a system restart. To enable USB communication, klipper needs to be reconfigured:</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make menuconfig
</code></pre></div></div> <p>Enable USB communication (see image below) and Exit the configuration dialog. <img src="/community/howto/kage-chan/images/MakeMenuconfig.png" alt="Klipper's menuconfig dialog with USB communication enabled" /></p> <ol> <li>After updating and reconfiguring your local repository remove any existing binaries or compiled object files and recompile Klipper:</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make clean
make
</code></pre></div></div> <ol> <li>In the next step, flashing Klipper through the USB connection to the SKRs, the filesystem paths to the two SKRs must be known. My two SKRs are accessible through the following paths: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/dev/serial/by-path/platform-3f980000.usb-usb-0:1.3:1.0
/dev/serial/by-path/platform-3f980000.usb-usb-0:1.5:1.0
</code></pre></div> </div> </li> </ol> <p>A list of full paths for your SKRs can be shown by executing</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-d1</span> /dev/serial/by-path/<span class="k">*</span>
</code></pre></div></div> <p>Or simply take them from your existing printer.cfg.</p> <p>With these paths at hand, Klipper can now be flashed to the SKRs:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make flash <span class="nv">FLASH_DEVICE</span><span class="o">=</span>&lt;path to first SKR&gt;
make flash <span class="nv">FLASH_DEVICE</span><span class="o">=</span>&lt;path to second SKR&gt;
</code></pre></div></div> <p>As an example, for my two SKRs it would look like this:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make flash <span class="nv">FLASH_DEVICE</span><span class="o">=</span>/dev/serial/by-path/platform-3f980000.usb-usb-0:1.3:1.0
make flash <span class="nv">FLASH_DEVICE</span><span class="o">=</span>/dev/serial/by-path/platform-3f980000.usb-usb-0:1.5:1.0
</code></pre></div></div> <p>Make sure to replace the paths with those of your SKRs, if they are different. In the future you will be able to update Klipper on your SKRs with the steps shown above, starting from step 3.</p> <p>Have fun and enjoy!</p> <p>-kage-chan</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
